@import "../common.scss";

// Purpose: Consolidated Bootstrap alert styles for light and dark themes using CSS variables.

$bootstrap-variants: (
	"primary",
	"secondary",
	"success",
	"danger",
	"warning",
	"info",
	"light",
	"dark"
);

$bootstrap-variant-contrast: (
	"primary": (
		"light": #ffffff,
		"dark": #031633
	),
	"secondary": (
		"light": #ffffff,
		"dark": #031633
	),
	"success": (
		"light": #ffffff,
		"dark": #ffffff
	),
	"danger": (
		"light": #ffffff,
		"dark": #ffffff
	),
	"warning": (
		"light": #ffffff,
		"dark": #031633
	),
	"info": (
		"light": #ffffff,
		"dark": #031633
	),
	"light": (
		"light": #ffffff,
		"dark": #031633
	),
	"dark": (
		"light": #ffffff,
		"dark": #031633
	)
);

$bootstrap-light-palette: (
	"primary": (
		"color": #084298,
		"border": #b6d4fe,
		"accent": #26559c,
		"alt": #084298,
		"bold": #084298,
		"light": #cfe2ff
	),
	"secondary": (
		"color": #41464b,
		"border": #d3d6d8,
		"accent": #5c6874,
		"alt": #41464b,
		"bold": #41464b,
		"light": #e2e3e5
	),
	"success": (
		"color": #0f5132,
		"border": #badbcc,
		"accent": #167247,
		"alt": #0f5132,
		"bold": #0f5132,
		"light": #d1e7dd
	),
	"danger": (
		"color": #842029,
		"border": #f5c2c7,
		"accent": #832e35,
		"alt": #842029,
		"bold": #842029,
		"light": #f8d7da
	),
	"warning": (
		"color": #664d03,
		"border": #ffecb5,
		"accent": #7f6002,
		"alt": #664d03,
		"bold": #664d03,
		"light": #fff3cd
	),
	"info": (
		"color": #055160,
		"border": #b6effb,
		"accent": #076c81,
		"alt": #055160,
		"bold": #055160,
		"light": #cff4fc
	),
	"light": (
		"color": #636464,
		"border": #fdfdfe,
		"accent": #7b7c7c,
		"alt": #636464,
		"bold": #636464,
		"light": #fefefe
	),
	"dark": (
		"color": #141619,
		"border": #bcbebf,
		"accent": #292d33,
		"alt": #141619,
		"bold": #141619,
		"light": #d3d3d4
	)
);

$bootstrap-dark-palette: (
	"primary": (
		"color": #6ea8fe,
		"border": #084298,
		"accent": #5a91e4,
		"alt": #6ea8fe,
		"bold": #6ea8fe,
		"light": #031633
	),
	"secondary": (
		"color": #a7acb1,
		"border": #084298,
		"accent": #c2c5c9,
		"alt": #a7acb1,
		"bold": #a7acb1,
		"light": #031633
	),
	"success": (
		"color": #75b798,
		"border": #084298,
		"accent": #167247,
		"alt": #75b798,
		"bold": #75b798,
		"light": #031633
	),
	"danger": (
		"color": #ea868f,
		"border": #084298,
		"accent": #832e35,
		"alt": #ea868f,
		"bold": #ea868f,
		"light": #031633
	),
	"warning": (
		"color": #ffda6a,
		"border": #084298,
		"accent": #eec959,
		"alt": #ffda6a,
		"bold": #ffda6a,
		"light": #031633
	),
	"info": (
		"color": #6edff6,
		"border": #084298,
		"accent": #5cc9df,
		"alt": #6edff6,
		"bold": #6edff6,
		"light": #031633
	),
	"light": (
		"color": #f8f9fa,
		"border": #084298,
		"accent": #eaf0f6,
		"alt": #f8f9fa,
		"bold": #f8f9fa,
		"light": #031633
	),
	"dark": (
		"color": #f8f9fa,
		"border": #084298,
		"accent": #eaf0f6,
		"alt": #f8f9fa,
		"bold": #f8f9fa,
		"light": #031633
	)
);

@mixin bootstrap-variant-css-vars($palette) {
	@each $variant, $values in $palette {
		--bootstrap-#{$variant}-color: #{map-get($values, "color")};
		--bootstrap-#{$variant}-color-border: #{map-get($values, "border")};
		--bootstrap-#{$variant}-color-accent: #{map-get($values, "accent")};
		--bootstrap-#{$variant}-color-alt: #{map-get($values, "alt")};
		--bootstrap-#{$variant}-color-bold: #{map-get($values, "bold")};
		--bootstrap-#{$variant}-color-light: #{map-get($values, "light")};
		--bootstrap-#{$variant}-color-contrast: #{map-get(map-get($bootstrap-variant-contrast, $variant), "light")};
		--bootstrap-#{$variant}-color-contrast-hover: #{map-get($values, "accent")};
	}
}

@mixin bootstrap-dark-css-vars($palette) {
	@each $variant, $values in $palette {
		--bootstrap-#{$variant}-color: #{map-get($values, "color")};
		--bootstrap-#{$variant}-color-border: #{map-get($values, "border")};
		--bootstrap-#{$variant}-color-accent: #{map-get($values, "accent")};
		--bootstrap-#{$variant}-color-alt: #{map-get($values, "alt")};
		--bootstrap-#{$variant}-color-bold: #{map-get($values, "bold")};
		--bootstrap-#{$variant}-color-light: #{map-get($values, "light")};
		--bootstrap-#{$variant}-color-contrast: #{map-get(map-get($bootstrap-variant-contrast, $variant), "dark")};
		--bootstrap-#{$variant}-color-contrast-hover: #{map-get($values, "accent")};
	}
}

.template-bootstrap {
	/* Light theme defaults. */
	@include bootstrap-variant-css-vars($bootstrap-light-palette);

	&.is-dark-mode {
		/* Dark theme overrides. */
		@include bootstrap-dark-css-vars($bootstrap-dark-palette);
	}

	/* Alert layout base. */
	.alerts-dlx-bootstrap {
		display: grid;
		grid-template-columns: 1fr;
		font-size: var(--alerts-dlx-bootstrap-base-size, 16px);
		padding: 0.75em 1.25em;
		border-radius: 0.25em;
		margin: 0 auto;
		border: 1px solid transparent;

		&.alerts-dlx-has-icon {
			grid-template-columns: 3.8em 1fr;
			padding-left: 0;
		}

		section h2.alerts-dlx-title {
			font-size: 1.2em;
			font-weight: 900;
			line-height: 1.5em;
			margin: 0;
			padding: 0;
			margin-bottom: 0.35em;
		}

		.alerts-dlx-content p {
			font-size: 1.2em;
			font-weight: 400;
			line-height: 1.5em;
			margin: 0;
			padding: 0;

			&:not(:first-child) {
				margin-top: 0.5em;
			}
		}

		button.button-reset,
		a.alerts-dlx-button,
		button.button-reset.components-button {
			font-size: 1.2em;
		}

		.alerts-dlx-icon-preview svg {
			width: 1.6em;
			height: 1.6em;
		}

		.alerts-dlx-icon-frontend .alerts-dlx-icon-preview {
			font-size: 1.2em;
			line-height: 2.2em;
		}

		.alerts-dlx-icon {
			display: flex;
			align-items: flex-start;
			justify-content: center;
		}
	}

	&.icon-vertical-align-centered {
		.alerts-dlx-icon {
			align-items: center;
		}
	}

	&.is-appearance-centered {
		.alerts-dlx-bootstrap {
			display: block;
		}

		.alerts-dlx-icon-preview svg {
			width: 1.6em;
			height: 1.6em;
		}

		section {
			text-align: center;
		}

		.alerts-dlx-button-wrapper {
			position: relative;
			flex-wrap: wrap;

			button:first-child {
				width: 100%;
				justify-content: center;
			}

			button:not(:first-child) {
				position: absolute;
				right: -35px;
			}
		}
	}

	&.is-style-custom {
		&.is-appearance-default,
		&.is-appearance-centered {
			.alerts-dlx-bootstrap {
				border-color: var(--alerts-dlx-bootstrap-color-border, var(--bootstrap-primary-color-border));
			}

			h2.alerts-dlx-title {
				color: var(--alerts-dlx-bootstrap-color-primary, var(--bootstrap-primary-color));
			}

			.alerts-dlx-content p {
				color: var(--alerts-dlx-bootstrap-color-primary, var(--bootstrap-primary-color));
			}

			.alerts-dlx-close {
				svg {
					color: var(--alerts-dlx-bootstrap-color-alt, var(--bootstrap-primary-color-alt));

					&:hover {
						color: var(--alerts-dlx-bootstrap-color-accent, var(--bootstrap-primary-color-accent));
					}
				}
			}

			.alerts-dlx-icon {
				svg,
				svg path svg g {
					color: var(--alerts-dlx-bootstrap-color-bold, var(--bootstrap-primary-color-bold));
					fill: var(--alerts-dlx-bootstrap-color-bold, var(--bootstrap-primary-color-bold));
				}
			}

			.alerts-dlx-bootstrap {
				background-color: var(--alerts-dlx-bootstrap-color-light, var(--bootstrap-primary-color-light));
				color: var(--alerts-dlx-bootstrap-color-primary, var(--bootstrap-primary-color));

				button.button-reset.alerts-dlx-button,
				a.alerts-dlx-button,
				a.alerts-dlx-button:hover,
				button.button-reset.alerts-dlx-button:hover {
					color: var(--alerts-dlx-bootstrap-color-alt-text, var(--bootstrap-primary-color-contrast));
					border: 1px solid transparent;
					background-color: var(--alerts-dlx-bootstrap-color-alt, var(--bootstrap-primary-color-alt));
				}

				a.alerts-dlx-button:hover,
				button.button-reset.alerts-dlx-button:hover {
					background-color: var(--alerts-dlx-bootstrap-color-alt-hover, var(--bootstrap-primary-color-accent));
					color: var(--alerts-dlx-bootstrap-color-alt-text-hover, var(--bootstrap-primary-color-contrast-hover));
				}
			}
		}
	}

	@each $variant in $bootstrap-variants {
		&.is-style-#{$variant} {
			&.is-appearance-default,
			&.is-appearance-centered {
				.alerts-dlx-bootstrap {
					border-color: var(--bootstrap-#{$variant}-color-border);
				}

				h2.alerts-dlx-title {
					color: var(--bootstrap-#{$variant}-color);
				}

				.alerts-dlx-content p {
					color: var(--bootstrap-#{$variant}-color);
				}

				.alerts-dlx-bootstrap {
					background-color: var(--bootstrap-#{$variant}-color-light);
					color: var(--bootstrap-#{$variant}-color);

					button.button-reset.alerts-dlx-button,
					a.alerts-dlx-button,
					a.alerts-dlx-button:hover,
					button.button-reset.alerts-dlx-button:hover {
						color: var(--bootstrap-#{$variant}-color-contrast);
						border: 1px solid transparent;
						background-color: var(--bootstrap-#{$variant}-color-alt);
					}

					a.alerts-dlx-button:hover,
					button.button-reset.alerts-dlx-button:hover {
						background-color: var(--bootstrap-#{$variant}-color-accent);
					}
				}

				.alerts-dlx-close {
					svg {
						color: var(--bootstrap-#{$variant}-color-alt);

						&:hover {
							color: var(--bootstrap-#{$variant}-color-accent);
						}
					}
				}

				.alerts-dlx-icon {
					svg,
					svg path svg g {
						color: var(--bootstrap-#{$variant}-color-bold);
						fill: var(--bootstrap-#{$variant}-color-bold);
					}
				}
			}
		}
	}
}

