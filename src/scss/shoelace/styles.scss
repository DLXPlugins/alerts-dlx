@import '../common.scss';

// Shoelace variant definitions.
$shoelace-light-variants: (
	'primary': (
		'border': #0284c7,
		'alt': #0284c7,
		'alt-hover': darken(#0ea5e9, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #0284c7,
		'solid-icon': $white,
		'solid-text': $white,
		'solid-button': #0ea5e9,
		'solid-button-hover': darken(#0ea5e9, 5%)
	),
	'success': (
		'border': #16a34a,
		'alt': #16a34a,
		'alt-hover': darken(#22c55e, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #16a34a,
		'solid-icon': $white,
		'solid-text': $white,
		'solid-button': #22c55e,
		'solid-button-hover': darken(#22c55e, 5%)
	),
	'neutral': (
		'border': #52525b,
		'alt': #52525b,
		'alt-hover': darken(#71717a, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #52525b,
		'solid-icon': $white,
		'solid-text': $white,
		'solid-button': #71717a,
		'solid-button-hover': darken(#71717a, 5%)
	),
	'warning': (
		'border': #d97706,
		'alt': #d97706,
		'alt-hover': darken(#f59e0b, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #d97706,
		'solid-icon': $white,
		'solid-text': $white,
		'solid-button': #f59e0b,
		'solid-button-hover': darken(#f59e0b, 5%)
	),
	'danger': (
		'border': #dc2626,
		'alt': #dc2626,
		'alt-hover': darken(#ef437f, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #dc2626,
		'solid-icon': $white,
		'solid-text': $white,
		'solid-button': #ef437f,
		'solid-button-hover': darken(#ef437f, 5%)
	)
);

$shoelace-dark-variants: (
	'primary': (
		'border': #27bafd,
		'alt': #27bafd,
		'alt-hover': darken(#119ee2, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #27bafd,
		'solid-icon': #119ee2,
		'solid-text': $white,
		'solid-button': #119ee2,
		'solid-button-hover': darken(#119ee2, 5%)
	),
	'success': (
		'border': #16a34a,
		'alt': #16a34a,
		'alt-hover': darken(#22c55e, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #16a34a,
		'solid-icon': #22c55e,
		'solid-text': $white,
		'solid-button': #22c55e,
		'solid-button-hover': darken(#22c55e, 5%)
	),
	'neutral': (
		'border': #52525b,
		'alt': #52525b,
		'alt-hover': darken(#71717a, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #52525b,
		'solid-icon': #71717a,
		'solid-text': $white,
		'solid-button': #71717a,
		'solid-button-hover': darken(#71717a, 5%)
	),
	'warning': (
		'border': #d97706,
		'alt': #d97706,
		'alt-hover': darken(#f59e0b, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #d97706,
		'solid-icon': #f59e0b,
		'solid-text': $white,
		'solid-button': #f59e0b,
		'solid-button-hover': darken(#f59e0b, 5%)
	),
	'danger': (
		'border': #dc2626,
		'alt': #dc2626,
		'alt-hover': darken(#ef437f, 5%),
		'alt-text': $white,
		'alt-text-hover': $white,
		'bold': #dc2626,
		'solid-icon': #ef437f,
		'solid-text': $white,
		'solid-button': #ef437f,
		'solid-button-hover': darken(#ef437f, 5%)
	)
);

$shoelace-modes: (
	'light': (
		'text-color': #000,
		'surface-background': transparent,
		'shell-border': #e4e4e7,
		'frame-border': #e4e4e7,
		'variants': $shoelace-light-variants
	),
	'dark': (
		'text-color': #fff,
		'surface-background': #242428,
		'shell-border': #e4e4e7,
		'frame-border': #36363B,
		'variants': $shoelace-dark-variants
	)
);

@function shoelace-get( $map, $key, $fallback: null ) {
	@if map-has-key( $map, $key ) {
		@return map-get( $map, $key );
	}

	@return $fallback;
}

@mixin shoelace-apply-mode-vars( $mode ) {
	$mode-map: map-get( $shoelace-modes, $mode );

	@if $mode-map {
		--alerts-dlx-shoelace-text-color: #{shoelace-get( $mode-map, 'text-color', #000 )};
		--alerts-dlx-shoelace-surface-background: #{shoelace-get( $mode-map, 'surface-background', transparent )};
		--alerts-dlx-shoelace-shell-border: #{shoelace-get( $mode-map, 'shell-border', #e4e4e7 )};
		--alerts-dlx-shoelace-frame-border: #{shoelace-get( $mode-map, 'frame-border', #e4e4e7 )};
	}
}

@mixin shoelace-assign-variant-vars( $tokens ) {
	--alerts-dlx-shoelace-color-border: #{shoelace-get( $tokens, 'border' )};
	--alerts-dlx-shoelace-color-alt: #{shoelace-get( $tokens, 'alt', shoelace-get( $tokens, 'border' ) )};
	--alerts-dlx-shoelace-color-alt-hover: #{shoelace-get( $tokens, 'alt-hover', shoelace-get( $tokens, 'alt', shoelace-get( $tokens, 'border' ) ) )};
	--alerts-dlx-shoelace-color-alt-text: #{shoelace-get( $tokens, 'alt-text', $white )};
	--alerts-dlx-shoelace-color-alt-text-hover: #{shoelace-get( $tokens, 'alt-text-hover', shoelace-get( $tokens, 'alt-text', $white ) )};
	--alerts-dlx-shoelace-color-bold: #{shoelace-get( $tokens, 'bold', shoelace-get( $tokens, 'border' ) )};
	--alerts-dlx-shoelace-solid-icon-color: #{shoelace-get( $tokens, 'solid-icon', shoelace-get( $tokens, 'alt-text', $white ) )};
	--alerts-dlx-shoelace-solid-text-color: #{shoelace-get( $tokens, 'solid-text', shoelace-get( $tokens, 'alt-text', $white ) )};
	--alerts-dlx-shoelace-solid-button-color: #{shoelace-get( $tokens, 'solid-button', shoelace-get( $tokens, 'alt', shoelace-get( $tokens, 'border' ) ) )};
	--alerts-dlx-shoelace-solid-button-hover: #{shoelace-get( $tokens, 'solid-button-hover', shoelace-get( $tokens, 'alt-hover', shoelace-get( $tokens, 'alt', shoelace-get( $tokens, 'border' ) ) ) )};
}

@mixin shoelace-apply-variants( $mode ) {
	$mode-map: map-get( $shoelace-modes, $mode );
	$variants: shoelace-get( $mode-map, 'variants', () );

	@each $variant, $tokens in $variants {
		&.is-style-#{$variant} {
			@include shoelace-assign-variant-vars( $tokens );
		}
	}
}

@mixin shoelace-style-base() {
	.alerts-dlx-shoelace {
		border-top: 3px solid var(--alerts-dlx-shoelace-color-border, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-text-color, #000)));
	}

	h2.alerts-dlx-title {
		color: var(--alerts-dlx-shoelace-text-color, #000);
	}

	.alerts-dlx-content p {
		color: var(--alerts-dlx-shoelace-text-color, #000);
	}

	button.button-reset.alerts-dlx-button,
	a.alerts-dlx-button {
		color: var(--alerts-dlx-shoelace-color-alt-text, $white);
		border: 1px solid transparent;
		background: var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-color-border, var(--alerts-dlx-shoelace-text-color, #000)));
	}

	a.alerts-dlx-button:hover,
	button.button-reset.alerts-dlx-button:hover {
		background: var(--alerts-dlx-shoelace-color-alt-hover, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-color-border, var(--alerts-dlx-shoelace-text-color, #000))));
		color: var(--alerts-dlx-shoelace-color-alt-text-hover, var(--alerts-dlx-shoelace-color-alt-text, $white));
	}

	.alerts-dlx-close {
		svg {
			color: var(--alerts-dlx-shoelace-color-bold, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-text-color, #000)));

			&:hover {
				color: var(--alerts-dlx-shoelace-color-alt-hover, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-color-bold, var(--alerts-dlx-shoelace-text-color, #000))));
			}
		}
	}

	svg,
	svg path svg g {
		color: var(--alerts-dlx-shoelace-color-bold, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-text-color, #000)));
		fill: var(--alerts-dlx-shoelace-color-bold, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-text-color, #000)));
	}

	&.is-appearance-left-accent {
		figure {
			position: relative;
			border: 1px solid var(--alerts-dlx-shoelace-frame-border, #e4e4e7);
			border-top-width: 1px;
			border-left-width: 0.25em;
			border-left-color: var(--alerts-dlx-shoelace-color-border, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-text-color, #000)));
		}

		.alerts-dlx-has-icon {
			display: flex;
			padding-left: 2.8em;
		}

		.alerts-dlx-icon {
			position: absolute;
			top: calc( 50% - 0.97em );
			left: calc( (-1.4em / 2) - 0.25em );
		}

		.alerts-dlx-icon-preview {
			font-size: unset;
			line-height: unset;
		}

		svg {
			background: var(--alerts-dlx-shoelace-color-border, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-text-color, #000)));
			color: var(--alerts-dlx-shoelace-color-alt-text, $white);
			fill: var(--alerts-dlx-shoelace-color-alt-text, $white);
			border-radius: 100%;
			border: 0;
		}
	}

	&.is-appearance-top-accent {
		figure {
			position: relative;
			border: 1px solid var(--alerts-dlx-shoelace-frame-border, #e4e4e7);
			border-top-width: 3px;
			border-top-color: var(--alerts-dlx-shoelace-color-border, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-text-color, #000)));
			border-left-width: 0;
		}

		svg {
			color: var(--alerts-dlx-shoelace-color-alt, $white);
			fill: var(--alerts-dlx-shoelace-color-alt, $white);
		}
	}

	&.is-appearance-solid {
		figure {
			position: relative;
			border: 1px solid transparent;
			background: var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-color-border, var(--alerts-dlx-shoelace-text-color, #000)));
			color: var(--alerts-dlx-shoelace-solid-text-color, var(--alerts-dlx-shoelace-color-alt-text, $white));
		}

		svg {
			color: var(--alerts-dlx-shoelace-solid-icon-color, var(--alerts-dlx-shoelace-color-alt-text, $white));
			fill: var(--alerts-dlx-shoelace-solid-icon-color, var(--alerts-dlx-shoelace-color-alt-text, $white));
		}

		h2,
		p {
			color: var(--alerts-dlx-shoelace-solid-text-color, var(--alerts-dlx-shoelace-color-alt-text, $white));
		}

		section .alerts-dlx-button {
			background: var(--alerts-dlx-shoelace-solid-button-color, var(--alerts-dlx-shoelace-color-alt-hover, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-color-border, var(--alerts-dlx-shoelace-text-color, #000)))));
			color: var(--alerts-dlx-shoelace-color-alt-text, $white);
		}

		section .alerts-dlx-button:hover {
			background: var(--alerts-dlx-shoelace-solid-button-hover, var(--alerts-dlx-shoelace-solid-button-color, var(--alerts-dlx-shoelace-color-alt, var(--alerts-dlx-shoelace-color-border, var(--alerts-dlx-shoelace-text-color, #000)))));
			color: var(--alerts-dlx-shoelace-color-alt-text-hover, var(--alerts-dlx-shoelace-color-alt-text, $white));
		}
	}
}

.template-shoelace {
	@include shoelace-apply-mode-vars( 'light' );
	@include shoelace-apply-variants( 'light' );

	--alerts-dlx-shoelace-color-primary: var(--alerts-dlx-shoelace-text-color, #000);
	--alerts-dlx-shoelace-color-light: var(--alerts-dlx-shoelace-surface-background, transparent);

	figure.alerts-dlx-alert.alerts-dlx-shoelace[role="alert"] {
		color: var(--alerts-dlx-shoelace-text-color, #000);
	}

	.alerts-dlx-shoelace {
		display: grid;
		grid-template-columns: 1fr;
		font-size: var(--alerts-dlx-shoelace-base-size, 16px);
		padding: 0.75em 1.25em;
		border-radius: 0;
		margin: 0 auto;
		border-radius: 0.25rem;
		border: 1px solid var(--alerts-dlx-shoelace-shell-border, #e4e4e7);
		color: var(--alerts-dlx-shoelace-text-color, #000);

		&.alerts-dlx-has-icon {
			grid-template-columns: 3.8em 1fr;
			padding-left: 0;
		}

		section h2.alerts-dlx-title {
			font-size: 1.2em;
			font-weight: 900;
			line-height: 1.5em;
			margin: 0 0 0.35em;
			padding: 0;
		}

		.alerts-dlx-content p {
			font-size: 1.2em;
			font-weight: 400;
			line-height: 1.5em;
			margin: 0;
			padding: 0;

			&:not(:first-child) {
				margin-top: 0.5em;
			}
		}

		button.button-reset:not(.alerts-dlx-icon-preview-button),
		a.alerts-dlx-button:not(.alerts-dlx-icon-preview-button),
		button.button-reset.components-button:not(.alerts-dlx-icon-preview-button) {
			font-size: 1.2em;
		}

		.alerts-dlx-icon-preview svg {
			width: 1.4em;
			height: 1.4em;
			font-size: 1.2em;
		}

		.alerts-dlx-icon-frontend .alerts-dlx-icon-preview {
			font-size: 1.2em;
			line-height: 2.2em;
		}

		.alerts-dlx-icon {
			display: flex;
			align-items: flex-start;
			justify-content: center;
		}
	}

	&.is-appearance-left-accent {
		svg {
			border-radius: 100%;
			border: 0;
		}
	}

	&.icon-vertical-align-centered {
		.alerts-dlx-icon {
			align-items: center;
		}
	}

	&.is-appearance-centered {
		figure {
			display: block;
		}

		.alerts-dlx-shoelace {
			display: block;
		}

		.alerts-dlx-icon-preview svg {
			width: 1.6em;
			height: 1.6em;
		}

		section {
			text-align: center;
		}

		.alerts-dlx-button-wrapper {
			position: relative;
			flex-wrap: wrap;

			button:first-child {
				width: 100%;
				justify-content: center;
			}

			button:not(:first-child) {
				position: absolute;
				right: -35px;
			}
		}
	}

	&.is-style-primary,
	&.is-style-success,
	&.is-style-neutral,
	&.is-style-warning,
	&.is-style-danger {
		@include shoelace-style-base();
	}

	&.is-style-custom {
		figure.alerts-dlx-alert.alerts-dlx-shoelace[role="alert"] {
			background: var(--alerts-dlx-shoelace-color-light, $white);
			border-top: 3px solid var(--alerts-dlx-shoelace-color-border, #0284c7);
		}

		h2.alerts-dlx-title {
			color: var(--alerts-dlx-shoelace-color-primary, var(--alerts-dlx-shoelace-text-color, #000));
		}

		.alerts-dlx-content p {
			color: var(--alerts-dlx-shoelace-color-primary, var(--alerts-dlx-shoelace-text-color, #000));
		}

		button.button-reset.alerts-dlx-button,
		a.alerts-dlx-button,
		a.alerts-dlx-button:hover,
		button.button-reset.alerts-dlx-button:hover {
			color: var(--alerts-dlx-shoelace-color-alt-text, $white);
			border: 1px solid transparent;
			background: var(--alerts-dlx-shoelace-color-alt, #0284c7);
		}

		a.alerts-dlx-button:hover,
		button.button-reset.alerts-dlx-button:hover {
			background: var(--alerts-dlx-shoelace-color-alt-hover, #0ea5e9);
			color: var(--alerts-dlx-shoelace-color-alt-text-hover, $white);
		}

		.alerts-dlx-close {
			svg {
				color: var(--alerts-dlx-shoelace-color-bold, #0284c7);

				&:hover {
					color: var(--alerts-dlx-shoelace-color-bold, #0ea5e9);
				}
			}
		}

		svg,
		svg path svg g {
			color: var(--alerts-dlx-shoelace-color-bold, #0284c7);
			fill: var(--alerts-dlx-shoelace-color-bold, #0284c7);
		}

		&.is-appearance-left-accent {
			figure {
				position: relative;
				border: 1px solid #e4e4e7;
				border-left-width: 0.25em;
				border-left-color: var(--alerts-dlx-shoelace-color-border, #0284c7);
			}

			.alerts-dlx-has-icon {
				display: flex;
				padding-left: 2.8em;
			}

			.alerts-dlx-icon {
				position: absolute;
				top: calc( 50% - 0.97em );
				left: calc( (-1.4em / 2) - 0.25em );
			}

			.alerts-dlx-icon-preview {
				font-size: unset;
				line-height: unset;
			}

			svg {
				background: var(--alerts-dlx-shoelace-color-primary, var(--alerts-dlx-shoelace-text-color, #000));
				color: var(--alerts-dlx-shoelace-color-bold, $white);
				fill: var(--alerts-dlx-shoelace-color-bold, $white);
			}
		}

		&.is-appearance-solid {
			figure {
				position: relative;
				border: 1px solid transparent;
				background: var(--alerts-dlx-shoelace-color-light, var(--alerts-dlx-shoelace-color-alt, #0284c7));
				color: var(--alerts-dlx-shoelace-color-primary, $white);
			}

			svg {
				color: var(--alerts-dlx-shoelace-color-bold, $white);
				fill: var(--alerts-dlx-shoelace-color-bold, $white);
			}

			h2,
			p {
				color: var(--alerts-dlx-shoelace-color-primary, $white);
			}

			section .alerts-dlx-button {
				background: var(--alerts-dlx-shoelace-color-alt, #0ea5e9);
				color: var(--alerts-dlx-shoelace-color-alt-text, $white);
			}

			section .alerts-dlx-button:hover {
				background: var(--alerts-dlx-shoelace-color-alt-hover, #0ea5e9);
				color: var(--alerts-dlx-shoelace-color-alt-text-hover, $white);
			}
		}
	}

	&.is-dark-mode {
		@include shoelace-apply-mode-vars( 'dark' );
		@include shoelace-apply-variants( 'dark' );

		--alerts-dlx-shoelace-color-primary: var(--alerts-dlx-shoelace-text-color, #fff);
		--alerts-dlx-shoelace-color-light: var(--alerts-dlx-shoelace-surface-background, #242428);

		figure.alerts-dlx-alert.alerts-dlx-shoelace[role="alert"] {
			background: var(--alerts-dlx-shoelace-surface-background, #242428);
			color: var(--alerts-dlx-shoelace-text-color, #fff);
		}

		&.is-style-custom {
			figure.alerts-dlx-alert.alerts-dlx-shoelace[role="alert"] {
				border-top: 3px solid var(--alerts-dlx-shoelace-color-border, #27bafd);
			}

			button.button-reset.alerts-dlx-button,
			a.alerts-dlx-button,
			a.alerts-dlx-button:hover,
			button.button-reset.alerts-dlx-button:hover {
				background: var(--alerts-dlx-shoelace-color-alt, #27bafd);
			}

			a.alerts-dlx-button:hover,
			button.button-reset.alerts-dlx-button:hover {
				background: var(--alerts-dlx-shoelace-color-alt-hover, #119ee2);
			}

			section .alerts-dlx-button {
				background: var(--alerts-dlx-shoelace-color-alt, #27bafd);
			}

			section .alerts-dlx-button:hover {
				background: var(--alerts-dlx-shoelace-color-alt-hover, #119ee2);
			}
		}
	}
}


