@import '../common.scss';

// Material colors.
$material-success-color: #1e4620;
$material-success-color-accent: #295e2c;
$material-success-color-alt: #2e7d32;
$material-success-color-bold: #4caf50;
$material-success-color-light: #edf7ed;
$material-info-color: #014361;
$material-info-color-accent: #035e88;
$material-info-color-alt: #0277bd;
$material-info-color-bold: #03a9f4;
$material-info-color-light: #e5f6fd;
$material-warning-color: #663c00;
$material-warning-color-accent: #8c5e00;
$material-warning-color-alt: #ed6c02;
$material-warning-color-bold: #ff9800;
$material-warning-color-light: #fff4e5;
$material-error-color: #5f2120;
$material-error-color-accent: #8c2d2b;
$material-error-color-alt: #d32f2f;
$material-error-color-bold: #ef5350;
$material-error-color-light: #fdeded;

$material-dark-success-color: #cce8cd;
$material-dark-success-color-accent: #49a44e;
$material-dark-success-color-alt: #5cbb60;
$material-dark-success-color-bold: #66bb6a;
$material-dark-success-color-light: #0c130d;
$material-dark-info-color: #b8e7fb;
$material-dark-info-color-accent: #23abea;
$material-dark-info-color-alt: #20a2df;
$material-dark-info-color-bold: #29b6f6;
$material-dark-info-color-light: #071318;
$material-dark-warning-color: #ffe2b7;
$material-dark-warning-color-accent: #e3a03a;
$material-dark-warning-color-alt: #f9aa33;
$material-dark-warning-color-bold: #ffa726;
$material-dark-warning-color-light: #191207;
$material-dark-error-color: #f4c7c7;
$material-dark-error-color-accent: #c93328;
$material-dark-error-color-alt: #d43c31;
$material-dark-error-color-bold: #f44336;
$material-dark-error-color-light: #160b0b;

$material-variants: (
	'success',
	'info',
	'warning',
	'error'
);

$material-light-palette: (
	'success': (
		'base': (
			'color': $material-success-color,
			'color-accent': $material-success-color-accent,
			'color-alt': $material-success-color-alt,
			'color-bold': $material-success-color-bold,
			'color-light': $material-success-color-light
		),
		'subtle': (
			'button-text': $white,
			'button-background': $material-success-color
		),
		'outlined': (
			'background': $white,
			'button-text': $material-success-color,
			'button-background': $white,
			'button-text-hover': $white,
			'button-background-hover': $material-success-color-alt
		),
		'filled': (
			'background': $material-success-color-alt,
			'border': $material-success-color-alt,
			'button-text': $material-success-color-alt,
			'button-border': $material-success-color-alt,
			'button-background': $white,
			'button-background-hover': $material-success-color-alt,
			'button-border-hover': $white
		)
	),
	'info': (
		'base': (
			'color': $material-info-color,
			'color-accent': $material-info-color-accent,
			'color-alt': $material-info-color-alt,
			'color-bold': $material-info-color-bold,
			'color-light': $material-info-color-light
		),
		'subtle': (
			'button-text': $white,
			'button-background': $material-info-color
		),
		'outlined': (
			'background': $white,
			'button-text': $material-info-color,
			'button-background': $white,
			'button-text-hover': $white,
			'button-background-hover': $material-info-color-alt
		),
		'filled': (
			'background': $material-info-color-alt,
			'border': $material-info-color-alt,
			'button-text': $material-info-color-alt,
			'button-border': $material-info-color-alt,
			'button-background': $white,
			'button-background-hover': $material-info-color-alt,
			'button-border-hover': $white
		)
	),
	'warning': (
		'base': (
			'color': $material-warning-color,
			'color-accent': $material-warning-color-accent,
			'color-alt': $material-warning-color-alt,
			'color-bold': $material-warning-color-bold,
			'color-light': $material-warning-color-light
		),
		'subtle': (
			'button-text': $white,
			'button-background': $material-warning-color
		),
		'outlined': (
			'background': $white,
			'button-text': $material-warning-color,
			'button-background': $white,
			'button-text-hover': $white,
			'button-background-hover': $material-warning-color-alt
		),
		'filled': (
			'background': $material-warning-color-alt,
			'border': $material-warning-color-alt,
			'button-text': $material-warning-color-alt,
			'button-border': $material-warning-color-alt,
			'button-background': $white,
			'button-background-hover': $material-warning-color-alt,
			'button-border-hover': $white
		)
	),
	'error': (
		'base': (
			'color': $material-error-color,
			'color-accent': $material-error-color-accent,
			'color-alt': $material-error-color-alt,
			'color-bold': $material-error-color-bold,
			'color-light': $material-error-color-light
		),
		'subtle': (
			'button-text': $white,
			'button-background': $material-error-color
		),
		'outlined': (
			'background': $white,
			'button-text': $material-error-color,
			'button-background': $white,
			'button-text-hover': $white,
			'button-background-hover': $material-error-color-alt
		),
		'filled': (
			'background': $material-error-color-alt,
			'border': $material-error-color-alt,
			'button-text': $material-error-color-alt,
			'button-border': $material-error-color-alt,
			'button-background': $white,
			'button-background-hover': $material-error-color-alt,
			'button-border-hover': $white
		)
	)
);

$material-dark-palette: (
	'success': (
		'base': (
			'color': $material-dark-success-color,
			'color-accent': $material-dark-success-color-accent,
			'color-alt': $material-dark-success-color-alt,
			'color-bold': $material-dark-success-color-bold,
			'color-light': $material-dark-success-color-light
		),
		'subtle': (
			'button-text': $material-dark-success-color-light,
			'button-background': $material-dark-success-color-bold
		),
		'outlined': (
			'background': $material-dark-error-color-light,
			'button-text': $material-dark-success-color-light,
			'button-background': $material-dark-success-color-bold,
			'button-text-hover': $material-dark-success-color-light,
			'button-background-hover': $material-dark-success-color-accent
		),
		'filled': (
			'background': $material-dark-success-color-bold,
			'border': $material-dark-success-color-bold,
			'button-text': $white,
			'button-border': $white,
			'button-background': transparent,
			'button-background-hover': $material-dark-success-color-light,
			'button-border-hover': $material-dark-success-color-light
		)
	),
	'info': (
		'base': (
			'color': $material-dark-info-color,
			'color-accent': $material-dark-info-color-accent,
			'color-alt': $material-dark-info-color-alt,
			'color-bold': $material-dark-info-color-bold,
			'color-light': $material-dark-info-color-light
		),
		'subtle': (
			'button-text': $white,
			'button-background': $material-dark-info-color-bold
		),
		'outlined': (
			'background': $material-dark-info-color-light,
			'button-text': $white,
			'button-background': $material-dark-info-color-bold,
			'button-text-hover': $white,
			'button-background-hover': $material-dark-info-color-alt
		),
		'filled': (
			'background': $material-dark-info-color-bold,
			'border': $material-dark-info-color-bold,
			'button-text': $white,
			'button-border': $white,
			'button-background': transparent,
			'button-background-hover': $material-dark-info-color-light,
			'button-border-hover': $material-dark-info-color-light
		)
	),
	'warning': (
		'base': (
			'color': $material-dark-warning-color,
			'color-accent': $material-dark-warning-color-accent,
			'color-alt': $material-dark-warning-color-alt,
			'color-bold': $material-dark-warning-color-bold,
			'color-light': $material-dark-warning-color-light
		),
		'subtle': (
			'button-text': $material-dark-warning-color-light,
			'button-background': $material-dark-warning-color-bold
		),
		'outlined': (
			'background': $material-dark-warning-color-light,
			'button-text': $material-dark-warning-color-light,
			'button-background': $material-dark-warning-color-bold,
			'button-text-hover': $material-dark-warning-color-light,
			'button-background-hover': $material-dark-warning-color-alt
		),
		'filled': (
			'background': $material-dark-warning-color-bold,
			'border': $material-dark-warning-color-bold,
			'button-text': $material-dark-warning-color-light,
			'button-border': $material-dark-warning-color-light,
			'button-background': transparent,
			'button-background-hover': $material-dark-warning-color-light,
			'button-border-hover': $material-dark-warning-color-light
		)
	),
	'error': (
		'base': (
			'color': $material-dark-error-color,
			'color-accent': $material-dark-error-color-accent,
			'color-alt': $material-dark-error-color-alt,
			'color-bold': $material-dark-error-color-bold,
			'color-light': $material-dark-error-color-light
		),
		'subtle': (
			'button-text': $white,
			'button-background': $material-dark-error-color-bold
		),
		'outlined': (
			'background': $material-dark-error-color-light,
			'button-text': $white,
			'button-background': $material-dark-error-color-bold,
			'button-text-hover': $white,
			'button-background-hover': $material-dark-error-color-alt
		),
		'filled': (
			'background': $material-dark-error-color-bold,
			'border': $material-dark-error-color-bold,
			'button-text': $white,
			'button-border': $white,
			'button-background': transparent,
			'button-background-hover': $material-dark-error-color-light,
			'button-border-hover': $material-dark-error-color-light
		)
	)
);

@mixin material-css-vars( $palette ) {
	@each $variant, $config in $palette {
		$base: map-get( $config, 'base' );
		$subtle: map-get( $config, 'subtle' );
		$outlined: map-get( $config, 'outlined' );
		$filled: map-get( $config, 'filled' );

		--material-#{$variant}-color: #{map-get( $base, 'color' )};
		--material-#{$variant}-color-accent: #{map-get( $base, 'color-accent' )};
		--material-#{$variant}-color-alt: #{map-get( $base, 'color-alt' )};
		--material-#{$variant}-color-bold: #{map-get( $base, 'color-bold' )};
		--material-#{$variant}-color-light: #{map-get( $base, 'color-light' )};
		--material-#{$variant}-subtle-button-text: #{map-get( $subtle, 'button-text' )};
		--material-#{$variant}-subtle-button-background: #{map-get( $subtle, 'button-background' )};
		--material-#{$variant}-outlined-background: #{map-get( $outlined, 'background' )};
		--material-#{$variant}-outlined-button-text: #{map-get( $outlined, 'button-text' )};
		--material-#{$variant}-outlined-button-background: #{map-get( $outlined, 'button-background' )};
		--material-#{$variant}-outlined-button-text-hover: #{map-get( $outlined, 'button-text-hover' )};
		--material-#{$variant}-outlined-button-background-hover: #{map-get( $outlined, 'button-background-hover' )};
		--material-#{$variant}-filled-background: #{map-get( $filled, 'background' )};
		--material-#{$variant}-filled-border: #{map-get( $filled, 'border' )};
		--material-#{$variant}-filled-button-text: #{map-get( $filled, 'button-text' )};
		--material-#{$variant}-filled-button-border: #{map-get( $filled, 'button-border' )};
		--material-#{$variant}-filled-button-background: #{map-get( $filled, 'button-background' )};
		--material-#{$variant}-filled-button-background-hover: #{map-get( $filled, 'button-background-hover' )};
		--material-#{$variant}-filled-button-border-hover: #{map-get( $filled, 'button-border-hover' )};
	}
}

.template-material {
	/* Light theme defaults. */
	@include material-css-vars( $material-light-palette );
	--alerts-dlx-material-title-weight: 900;

	&.is-dark-mode {
		/* Dark theme overrides. */
		@include material-css-vars( $material-dark-palette );
		--alerts-dlx-material-title-weight: 500;
	}

	/* Alert layout base. */
	.alerts-dlx-material {
		display: grid;
		grid-template-columns: 1fr;
		font-size: var( --alerts-dlx-material-base-size, 16px );
		padding: 16px;
		border-radius: 4px;
		margin: 0 auto;

		.alerts-dlx-icon-preview svg {
			width: 1.8em;
			height: 1.8em;
		}

		&.alerts-dlx-has-icon {
			grid-template-columns: 3.8em 1fr;
			padding-left: 0;
		}

		section h2.alerts-dlx-title {
			font-size: 1.2em;
			font-weight: var( --alerts-dlx-material-title-weight, 900 );
			line-height: 1.5em;
			margin: 0 0 0.35em;
			padding: 0;
		}

		.alerts-dlx-content p {
			font-size: 1.2em;
			font-weight: 400;
			line-height: 1.5em;
			margin: 0;
			padding: 0;

			&:not(:first-child) {
				margin-top: 0.5em;
			}
		}

		button.button-reset,
		a.alerts-dlx-button,
		button.button-reset.components-button {
			font-size: 1.2em;
		}

		.alerts-dlx-icon-preview svg {
			width: 1.4em;
			height: 1.4em;
		}

		.alerts-dlx-icon {
			display: flex;
			align-items: flex-start;
			justify-content: center;
		}
	}

	&.icon-vertical-align-centered {
		.alerts-dlx-icon {
			align-items: center;
		}
	}

	/* Dropshadows. */
	&.is-style-success.is-dropshadow-enabled.is-appearance-default .alerts-dlx-material {
		box-shadow: 1px 1px 5px 1px rgba( 46, 125, 50, 0.2 );
	}

	&.is-style-info.is-dropshadow-enabled.is-appearance-default .alerts-dlx-material {
		box-shadow: 1px 1px 5px 1px rgba( 2, 119, 189, 0.2 );
	}

	&.is-style-warning.is-dropshadow-enabled.is-appearance-default .alerts-dlx-material {
		box-shadow: 1px 1px 5px 1px rgba( 237, 108, 2, 0.2 );
	}

	&.is-style-error.is-dropshadow-enabled.is-appearance-default .alerts-dlx-material {
		box-shadow: 1px 1px 5px 1px rgba( 211, 47, 47, 0.2 );
	}

	&.is-appearance-centered {
		.alerts-dlx-material {
			display: block;
		}

		.alerts-dlx-icon-preview svg {
			width: 1.6em;
			height: 1.6em;
		}

		section {
			text-align: center;
		}

		.alerts-dlx-button-wrapper {
			position: relative;
			flex-wrap: wrap;

			button:first-child {
				width: 100%;
				justify-content: center;
			}

			button:not(:first-child) {
				position: absolute;
				right: -35px;
			}
		}
	}

	&.is-style-custom {
		h2.alerts-dlx-title {
			color: var( --alerts-dlx-material-color-primary, var( --material-info-color ) );
		}

		.alerts-dlx-content p {
			color: var( --alerts-dlx-material-color-primary, var( --material-info-color ) );
		}

		&.is-appearance-default,
		&.is-appearance-centered {
			.alerts-dlx-material {
				background-color: var( --alerts-dlx-material-color-light, var( --material-info-color-light ) );
				color: var( --alerts-dlx-material-color-primary, var( --material-info-color ) );

				button.button-reset.alerts-dlx-button,
				a.alerts-dlx-button,
				a.alerts-dlx-button:hover,
				button.button-reset.alerts-dlx-button:hover {
					color: var( --alerts-dlx-material-color-alt-text, $white );
					border: 1px solid transparent;
					background-color: var( --alerts-dlx-material-color-alt, var( --material-info-color-alt ) );
				}

				a.alerts-dlx-button:hover,
				button.button-reset.alerts-dlx-button:hover {
					background-color: var( --alerts-dlx-material-color-alt-hover, var( --material-info-color-accent ) );
					color: var( --alerts-dlx-material-color-alt-text-hover, $white );
				}

				svg,
				svg path {
					color: var( --alerts-dlx-material-color-bold, var( --material-info-color-bold ) );
					fill: var( --alerts-dlx-material-color-bold, var( --material-info-color-bold ) );
				}
			}
		}

		&.is-appearance-outlined {
			.alerts-dlx-material {
				background-color: var( --alerts-dlx-material-color-light, $white );
				color: var( --alerts-dlx-material-color-primary, var( --material-info-color ) );
				border: 2px solid var( --alerts-dlx-material-color-border, var( --material-info-color-bold ) );

				button.button-reset.alerts-dlx-button,
				a.alerts-dlx-button,
				a.alerts-dlx-button:hover,
				button.button-reset.alerts-dlx-button:hover {
					color: var( --alerts-dlx-material-color-alt-text, var( --material-info-color ) );
					border: 2px solid var( --alerts-dlx-material-color-border, var( --material-info-color-bold ) );
					background-color: var( --alerts-dlx-material-color-alt, $white );
				}

				a.alerts-dlx-button:hover,
				button.button-reset.alerts-dlx-button:hover {
					background-color: var( --alerts-dlx-material-color-alt-hover, var( --material-info-color-accent ) );
					color: var( --alerts-dlx-material-color-alt-text-hover, $white );
					border: 2px solid var( --alerts-dlx-material-color-alt-hover, var( --material-info-color-accent ) );
				}

				svg,
				svg path {
					color: var( --alerts-dlx-material-color-bold, var( --material-info-color-bold ) );
					fill: var( --alerts-dlx-material-color-bold, var( --material-info-color-bold ) );
				}
			}
		}

		&.is-appearance-filled {
			.alerts-dlx-material {
				background-color: var( --alerts-dlx-material-color-light, var( --material-info-color-light ) );
				color: var( --alerts-dlx-material-color-alt-text, $white );
				border: 2px solid var( --alerts-dlx-material-color-border, var( --material-info-color-bold ) );

				button.button-reset.alerts-dlx-button,
				a.alerts-dlx-button,
				a.alerts-dlx-button:hover,
				button.button-reset.alerts-dlx-button:hover {
					color: var( --alerts-dlx-material-color-alt-text, var( --material-info-color ) );
					border: 2px solid var( --alerts-dlx-material-color-alt, var( --material-info-color ) );
					background-color: var( --alerts-dlx-material-color-alt, $white );
				}

				a.alerts-dlx-button:hover,
				button.button-reset.alerts-dlx-button:hover {
					background-color: var( --alerts-dlx-material-color-alt-hover, var( --material-info-color-accent ) );
					color: var( --alerts-dlx-material-color-alt-text-hover, $white );
					border: 2px solid var( --alerts-dlx-material-color-alt, $white );
				}

				svg,
				svg path {
					color: var( --alerts-dlx-material-color-bold, var( --material-info-color-bold ) );
					fill: var( --alerts-dlx-material-color-bold, var( --material-info-color-bold ) );
				}
			}
		}
	}

	@each $variant in $material-variants {
		&.is-style-#{$variant} {
			&.is-appearance-default,
			&.is-appearance-centered {
				h2.alerts-dlx-title {
					color: var( --material-#{$variant}-color );
				}

				.alerts-dlx-content p {
					color: var( --material-#{$variant}-color );
				}

				.alerts-dlx-material {
					background-color: var( --material-#{$variant}-color-light );
					color: var( --material-#{$variant}-color );

					button.button-reset.alerts-dlx-button,
					a.alerts-dlx-button,
					a.alerts-dlx-button:hover,
					button.button-reset.alerts-dlx-button:hover {
						color: var( --material-#{$variant}-subtle-button-text, $white );
						border: 1px solid transparent;
						background-color: var( --material-#{$variant}-subtle-button-background, var( --material-#{$variant}-color ) );
					}

					a.alerts-dlx-button:hover,
					button.button-reset.alerts-dlx-button:hover {
						background-color: var( --material-#{$variant}-color-accent );
						color: var( --material-#{$variant}-subtle-button-text, $white );
					}

					svg,
					svg path {
						fill: var( --material-#{$variant}-color-bold );
					}
				}

				.alerts-dlx-close {
					svg {
						color: var( --material-#{$variant}-color-bold );

						&:hover {
							color: var( --material-#{$variant}-color-accent );
						}
					}
				}
			}

			&.is-appearance-outlined {
				h2.alerts-dlx-title {
					color: var( --material-#{$variant}-color );
				}

				.alerts-dlx-content p {
					color: var( --material-#{$variant}-color );
				}

				.alerts-dlx-material {
					background-color: var( --material-#{$variant}-outlined-background, var( --material-#{$variant}-color-light ) );
					color: var( --material-#{$variant}-color );
					border: 2px solid var( --material-#{$variant}-color-bold );

					button.button-reset.alerts-dlx-button,
					a.alerts-dlx-button,
					a.alerts-dlx-button:hover,
					button.button-reset.alerts-dlx-button:hover {
						color: var( --material-#{$variant}-outlined-button-text, var( --material-#{$variant}-color ) );
						border: 2px solid var( --material-#{$variant}-color-bold );
						background-color: var( --material-#{$variant}-outlined-button-background, $white );
					}

					a.alerts-dlx-button:hover,
					button.button-reset.alerts-dlx-button:hover {
						background-color: var( --material-#{$variant}-outlined-button-background-hover, var( --material-#{$variant}-color-alt ) );
						color: var( --material-#{$variant}-outlined-button-text-hover, $white );
						border: 2px solid var( --material-#{$variant}-outlined-button-background-hover, var( --material-#{$variant}-color-alt ) );
					}

					svg,
					svg path {
						fill: var( --material-#{$variant}-color-bold );
					}
				}

				.alerts-dlx-close {
					svg {
						color: var( --material-#{$variant}-color-bold );

						&:hover {
							color: var( --material-#{$variant}-color-accent );
						}
					}
				}
			}

			&.is-appearance-filled {
				h2.alerts-dlx-title {
					color: $white;
				}

				.alerts-dlx-content p {
					color: $white;
				}

				.alerts-dlx-material {
					background-color: var( --material-#{$variant}-filled-background, var( --material-#{$variant}-color-alt ) );
					color: $white;
					border: 2px solid var( --material-#{$variant}-filled-border, var( --material-#{$variant}-color-alt ) );

					button.button-reset.alerts-dlx-button,
					a.alerts-dlx-button,
					a.alerts-dlx-button:hover,
					button.button-reset.alerts-dlx-button:hover {
						color: var( --material-#{$variant}-filled-button-text, var( --material-#{$variant}-color-alt ) );
						border: 2px solid var( --material-#{$variant}-filled-button-border, var( --material-#{$variant}-color-alt ) );
						background-color: var( --material-#{$variant}-filled-button-background, $white );
					}

					a.alerts-dlx-button:hover,
					button.button-reset.alerts-dlx-button:hover {
						background-color: var( --material-#{$variant}-filled-button-background-hover, var( --material-#{$variant}-color-light ) );
						color: $white;
						border: 2px solid var( --material-#{$variant}-filled-button-border-hover, var( --material-#{$variant}-color-light ) );
					}

					svg,
					svg path {
						fill: $white;
					}
				}

				.alerts-dlx-close {
					svg {
						color: $white;

						&:hover {
							color: var( --material-#{$variant}-color-accent );
						}
					}
				}
			}
		}
	}
}


